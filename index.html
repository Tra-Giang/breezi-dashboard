<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Breezi ‚Ä¢ Air Purifier Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body {font-family:'Poppins',sans-serif;margin:0;background:linear-gradient(135deg,#f0f4f8,#e8f1fb);color:#1e2a38;line-height:1.6;}
    header{display:flex;justify-content:space-between;align-items:center;padding:16px 28px;background:#ffffffd9;backdrop-filter:blur(10px);box-shadow:0 2px 10px rgba(0,0,0,0.08);position:sticky;top:0;z-index:100;}
    .lang-user{display:flex;gap:12px;}
    .lang-btn{background:transparent;border:1.5px solid #ccc;padding:8px 16px;border-radius:10px;cursor:pointer;font-weight:500;font-size:15px;transition:0.2s;}
    .lang-btn:hover{background:#e8f1fb;border-color:#99b8e4;}
    .container{display:grid;grid-template-columns:1fr 1fr;gap:22px;padding:20px;}
    .card{background:rgba(255,255,255,0.85);backdrop-filter:blur(8px);border-radius:16px;padding:20px;box-shadow:0 4px 15px rgba(0,0,0,0.05);border:1px solid rgba(255,255,255,0.6);}
    h2{text-align:center;margin:0 0 15px;font-size:20px;font-weight:600;}
    .aqi-value{font-size:48px;font-weight:600;text-align:center;padding:16px;border-radius:14px;margin-bottom:12px;color:#fff;background:#F44336;} /* Fixed Unhealthy */
    #main-pollutant {font-weight:700;font-size:18px;text-align:center;margin:8px 0;color:#d32f2f;}
    #aqi-warning {text-align:center;font-size:15px;color:#333;} /* Fixed color */

    /* ENV MINI INSIDE AQI */
    .env-mini-grid {display:grid;grid-template-columns:repeat(4,1fr);gap:10px;text-align:center;margin-top:15px;}
    .env-tile{background:#eef3fa;border-radius:10px;padding:8px 6px;font-size:14px;}
    .env-tile span{display:block;font-weight:600;font-size:15px;margin-top:2px;}
    .env-tile small{font-size:11px;color:#777;}

    /* SENSOR CARDS */
    .sensor-grid {display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:14px;}
    .sensor-card {background:#f9fbff;border-radius:12px;padding:12px;text-align:center;box-shadow:0 2px 8px rgba(0,0,0,0.05);}
    .sensor-card .icon{font-size:22px;margin-bottom:4px;}
    .sensor-card .value{font-size:20px;font-weight:600;}
    .sensor-card .label{font-size:12px;color:#666;}
    .sensor-card .bar{background:#eee;border-radius:8px;height:6px;margin-top:8px;overflow:hidden;}
    .sensor-card .bar div{height:100%;}
    .sensor-card[data-level="good"] .bar div{background:#4CAF50;}
    .sensor-card[data-level="moderate"] .bar div{background:#FFC107;}
    .sensor-card[data-level="bad"] .bar div{background:#F44336;}

    /* CONTROL PANEL */
    .controls .control-row{display:flex;justify-content:space-between;align-items:center;margin:14px 0;}
    .mode-buttons{display:flex;gap:6px;}
    .mode-btn{padding:6px 14px;border:1px solid #ccc;border-radius:20px;font-size:13px;cursor:pointer;}
    .mode-btn.active[data-mode="auto"]{background:#4CAF50;color:white;}
    .mode-btn.active[data-mode="on"]{background:#2196F3;color:white;}
    .mode-btn.active[data-mode="off"]{background:#b0b0b0;color:white;}
    .fan-icon{display:inline-block;margin-left:8px;font-size:18px;}
    .spin{animation:spin 1s linear infinite;}
    @keyframes spin{100%{transform:rotate(360deg);}}

    /* AQI THRESHOLD */
    .threshold-row{margin:16px 0;display:flex;justify-content:space-between;align-items:center;}
    .threshold-input{width:70px;padding:6px;border:1px solid #ccc;border-radius:8px;text-align:center;}

    /* ANALYTICS */
    .tabs{text-align:center;margin-bottom:8px;}
    .tabs button{margin:5px;padding:6px 14px;border:1px solid #ccc;border-radius:8px;background:#f5f8fb;cursor:pointer;}
    #metric-controls{text-align:center;margin-bottom:10px;}
    #metric-controls label{margin:0 8px;font-size:13px;cursor:pointer;}
    #activity-log{width:100%;border-collapse:collapse;margin-top:12px;font-size:13px;}
    #activity-log th,#activity-log td{border:1px solid #ddd;padding:6px;text-align:center;}
    #activity-log th{background:#f0f4f8;font-weight:600;}
    footer{text-align:center;padding:18px;background:#eef2f6;font-size:14px;color:#555;margin-top:20px;}
    @media(max-width:768px){.container{grid-template-columns:1fr;}}
  </style>
</head>
<body>
<header>
  <div class="logo"><h2>Breezi Air Purifier</h2></div>
  <div class="lang-user"><button class="lang-btn">EN</button><button class="lang-btn">VI</button></div>
</header>

<div class="container">
  <!-- AQI CARD -->
  <div class="card">
    <h2>Air Quality Index</h2>
    <div id="aqi-box" class="aqi-value">AQI: 165 (Unhealthy)</div>
    <div id="main-pollutant">üå´ Main Pollutant: PM2.5</div>
    <p id="aqi-warning">‚ö†Ô∏è Poor AQI! Consider filtration.</p>
    <div class="env-mini-grid">
      <div class="env-tile">üå°<span>26¬∞C</span><small>Temp</small></div>
      <div class="env-tile">üíß<span>60%</span><small>Humidity</small></div>
      <div class="env-tile">üå¨<span>1012 hPa</span><small>Pressure</small></div>
      <div class="env-tile">‚õÖ<span>Sunny</span><small>Weather</small></div>
    </div>
  </div>

  <!-- SENSORS -->
  <div class="card">
    <h2>Sensor Data</h2>
    <div class="sensor-grid">
      <div class="sensor-card" data-level="bad"><div class="icon">üå´</div><div class="value">55</div><div class="label">PM2.5</div><div class="bar"><div style="width:90%"></div></div></div>
      <div class="sensor-card" data-level="moderate"><div class="icon">üå´</div><div class="value">80</div><div class="label">PM10</div><div class="bar"><div style="width:65%"></div></div></div>
      <div class="sensor-card" data-level="good"><div class="icon">ü´Å</div><div class="value">0.5</div><div class="label">CO</div><div class="bar"><div style="width:10%"></div></div></div>
      <div class="sensor-card" data-level="good"><div class="icon">üè≠</div><div class="value">10</div><div class="label">NO‚ÇÇ</div><div class="bar"><div style="width:25%"></div></div></div>
      <div class="sensor-card" data-level="good"><div class="icon">üåã</div><div class="value">5</div><div class="label">SO‚ÇÇ</div><div class="bar"><div style="width:15%"></div></div></div>
      <div class="sensor-card" data-level="good"><div class="icon">ü™¥</div><div class="value">450</div><div class="label">CO‚ÇÇ</div><div class="bar"><div style="width:30%"></div></div></div>
      <div class="sensor-card" data-level="good"><div class="icon">üß™</div><div class="value">Low</div><div class="label">VOCs</div><div class="bar"><div style="width:20%"></div></div></div>
    </div>
  </div>
</div>

<!-- CONTROL PANEL & ANALYTICS -->
<div class="container">
  <div class="card controls">
    <h2>Control Panel</h2>
    <div class="control-row">
      <span>Filter Fan <span id="fan-icon" class="fan-icon">üåÄ</span></span>
      <div class="mode-buttons" data-control="fan">
        <button class="mode-btn active" data-mode="auto">Auto</button>
        <button class="mode-btn" data-mode="on">On</button>
        <button class="mode-btn" data-mode="off">Off</button>
      </div>
    </div>
    <div class="control-row">
      <span>Sterilization Mist</span>
      <div class="mode-buttons" data-control="mist">
        <button class="mode-btn active" data-mode="auto">Auto</button>
        <button class="mode-btn" data-mode="on">On</button>
        <button class="mode-btn" data-mode="off">Off</button>
      </div>
    </div>
    <div class="threshold-row">
      <span>AQI Threshold</span>
      <input class="threshold-input" type="number" value="100">
    </div>
  </div>

  <div class="card">
    <h2>Analytics & History</h2>
    <div class="tabs"><button>Hour</button><button>Day</button><button>Week</button></div>
    <div id="metric-controls">
      <label><input type="checkbox" value="AQI" checked> AQI</label>
      <label><input type="checkbox" value="PM2.5" checked> PM2.5</label>
      <label><input type="checkbox" value="PM10" checked> PM10</label>
      <label><input type="checkbox" value="CO"> CO</label>
      <label><input type="checkbox" value="NO‚ÇÇ"> NO‚ÇÇ</label>
      <label><input type="checkbox" value="SO‚ÇÇ"> SO‚ÇÇ</label>
      <label><input type="checkbox" value="CO‚ÇÇ"> CO‚ÇÇ</label>
    </div>
    <canvas id="multiChart"></canvas>
    <h3 style="text-align:center;margin-top:18px;">Device Activity Log</h3>
    <table id="activity-log">
      <thead><tr><th>Time</th><th>Fan Mode</th><th>Mist Mode</th><th>AQI Status</th><th>Recommendation</th></tr></thead>
      <tbody id="activity-body"></tbody>
    </table>
  </div>
</div>

<footer>¬© 2025 Breezi ‚Ä¢ Air Purifier Dashboard</footer>

<script>
  let fanMode = "Auto", mistMode = "Auto";

  function logActivity(aqi, status) {
    // Ch·ªâ log khi qu·∫°t ho·∫∑c mist ƒëang b·∫≠t
    if (fanMode !== "Off" || mistMode !== "Off") {
      const tbody = document.getElementById('activity-body');
      const now = new Date().toLocaleTimeString();
      let recommend =
        aqi > 200 ? "Stay indoors & max filter" :
        aqi > 150 ? "Keep filtration high" :
        aqi > 100 ? "Ventilate carefully" :
        "Normal Auto mode";

      const row = document.createElement('tr');
      row.innerHTML = `<td>${now}</td>
                       <td>${fanMode}</td>
                       <td>${mistMode}</td>
                       <td>${status}</td>
                       <td>${recommend}</td>`;
      tbody.prepend(row);
    }
  }

  document.querySelectorAll('.mode-buttons').forEach(group => {
    const buttons = group.querySelectorAll('.mode-btn');
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        buttons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        if (group.dataset.control === 'fan') {
          fanMode = btn.dataset.mode === "auto" ? "Auto" :
                    btn.dataset.mode === "on" ? "On" : "Off";
          const fan = document.getElementById('fan-icon');
          (btn.dataset.mode === 'on' || btn.dataset.mode === 'auto') ?
            fan.classList.add('spin') : fan.classList.remove('spin');
        } else {
          mistMode = btn.dataset.mode === "auto" ? "Auto" :
                     btn.dataset.mode === "on" ? "On" : "Off";
        }

        // Log ch·ªâ khi b·∫≠t
        if (fanMode !== "Off" || mistMode !== "Off") {
          logActivity(165, "Mode Change");
        }
      });
    });
  });

  // Log ban ƒë·∫ßu
  logActivity(165, "Initial Startup");
</script>
</body>
</html>
